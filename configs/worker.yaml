# Worker 服务配置
worker:
  concurrency: 4
  queue_size: 1000
  retry_count: 3
  retry_delay: 1s
  timeout: 5m
  # Agent Job 拉取间隔（从事件存储 Claim）
  poll_interval: "2s"

# 任务事件与元数据存储（与 API 共用 DSN 时，Worker Claim 执行 Job）
jobstore:
  type: "postgres"
  dsn: "postgres://corag:corag@localhost:5432/corag?sslmode=disable"
  lease_duration: "30s"

# 存储配置（当前元数据仅支持 memory；mysql 等需后续实现）
storage:
  metadata:
    type: "memory"
    dsn: ""
    pool_size: 0
  # 当前仅支持 memory；milvus/s3/redis 等需后续实现
  vector:
    type: "memory"
  object:
    type: "memory"
  cache:
    type: "memory"

# 模型配置（LLM/Embedding/Vision）由 configs/model.yaml 合并提供，Worker 使用 LoadWorkerConfigWithModel 加载

# 切片配置
splitter:
  chunk_size: 1000
  chunk_overlap: 100
  max_chunks: 1000

# 日志配置
log:
  level: "info"
  format: "json"
  file: "worker.log"

# 监控配置（多 Worker 时可用环境变量 CORAG_WORKER_METRICS_PORT 指定不同端口，如 9094）
monitoring:
  prometheus:
    enable: true
    port: 9093